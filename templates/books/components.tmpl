{{ define "release-list-by-added" }}
{{ if . }}
<table>
	<thead>
    <tr><th class=la>Title</th><th class=lv><img src=/static/volume.svg width=16 height=16></th><th class=lc><img src=/static/chapter.svg width=16 height=16></th><th class=ll><!--language--></th><th class=lg>Group</th><th class=ld>Added</th></tr>
	</thead>
	<tbody>
		{{ range . }}
		<tr>
			<td class=la><a href="/series/{{ .BookSeries.Id }}/{{ .BookSeries.Title | slugify | urlquery }}">{{ .BookSeries.Title }}</a></td>
      <td class=lv>{{ collapse_range .Chapters.Volumes }}</td>
			<td class=lc>{{ collapse_range .Chapters.Nums }}</td>
      <td class=ll><span class=lang-code>{{ .Language }}</span></td>
      <td class=lg>
        {{ $len := len .TranslationGroups.Ids | add -1 }}
        {{ $groups := .TranslationGroups }}
        {{ range $k, $name := .TranslationGroups.Names }}
        <a href="/group/{{ index $groups.Ids $k }}/{{ $name | slugify | urlquery }}">{{ $name }}</a>
        {{ if lt $k $len }} &amp; {{ end }}
        {{ end }}
      </td>
      <td class=ld><time datetime="{{ .ReleaseDate.Format "2006-01-02T15:04:05-0700" }}">{{ .ReleaseDate | ago }}</time></td>
		</tr>
		{{ end }}
	</tbody>
</table>
{{ else }}
<p class=tumbleweed>Nothing to see here.</p>
{{ end }}
{{ end }}

{{ define "series-list-by-added" }}<table>
	<thead>
    <tr><th class=la>Title</th><th class=ll><!--rating--></th><th class=lm><abbr title="Demographic">Dem<span class=unimportant>ographic</span><span class=important>.</span></abbr></th><th class=lt>Tags</th><th class=ly>Year</th><th class=ld>Added</th></tr>
	</thead>
	<tbody>
		{{ range . }}
		<tr{{ if .NSFW }} class=nsfw {{ end }}>
			<td class=la><a href="/series/{{ .Id }}/{{ .Title | slugify | urlquery }}">{{ .Title }}</a></td>
			<td class=ll><ul title="{{ if .AvgRating.Valid }}{{ .AvgRating.Float64 | printf "%.2g" }} / 5{{ else }}Not rated{{ end }}" class=rating-stars>{{ range .RatingStars }}<li class={{ . }}></li>{{ end }}</ul></td>
      <td class=lm>{{ .Demographic }}</td>
			<!-- <td class=lt>{{ $s := len .Tags }}{{ with .LimitedTags 3 }}{{ range . }}<a class=tag href="/tag/{{ urlquery . }}">{{ . }}</a>{{ end }}{{ if len . | gt $s }}<span class=tag>···</span>{{ end }}{{ end }}</td> -->
      <td class=lt>{{ range .Tags }}<a class=tag href="/tag/{{ urlquery . }}">{{ . }}</a>{{ end }}</td>
			<td class=ly>{{ .Vintage }}</td>
      <td class=ld><time datetime="{{ .DateAdded.Format "2006-01-02T15:04:05-0700" }}">{{ .DateAdded.Format "02 Jan" }}</time></td>
			</tr>
		{{ end }}
	</tbody>
</table>
{{ end }}

{{ define "news-post" }}<article id=news-{{ .Id }}>
	<h2><a href="/news/{{ .Id }}/{{ slugify .Title }}">{{ .Title }}</a></h2>
	<div class=news-meta>by <a href="/user/{{ .User.Id }}/{{ slugify .User.Name }}">{{ .User.Name }}</a> on <time datetime="{{ .DatePosted.Format "2006-01-02T15:04:05-0700" }}">{{ .DatePosted.Format "2006-01-02" }}</time> under <a href="/news/category/{{ .Category | urlquery }}">{{ .Category }}</a></div>
	<div class=post-body>
	{{ smarkdown .Body }}
	</div>
</article>
{{ end }}
